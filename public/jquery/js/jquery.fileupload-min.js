(function(c){var b={params:{},action:"",createParams:function(){return null},onStart:function(){},onComplete:function(e){},onCancel:function(){}};var a=function(m,k){var g,h=m.contentWindow.document.body.innerHTML;try{g=c.parseJSON(h)}catch(l){var f=h.indexOf("}");if(f>0){var j=h.substring(0,f+1);try{g=c.parseJSON(j)}catch(i){g=h}}else{g=h}}k.siblings().remove();k.unwrap();b.onComplete.apply(k,[g,b.params])};var d=function(e){var g=e.val();var f="ajaxUploader-iframe-"+Math.round(new Date().getTime()/1000);c("body").after('<iframe width="0" height="0" style="display:none;" name="'+f+'" id="'+f+'"/>');c("#"+f).load(function(){a(this,e)});e.wrap(function(){return'<form action="'+b.action+'" method="POST" enctype="multipart/form-data" target="'+f+'" />'}).after(function(){var j,i="";for(j in b.params){i+='<input type="hidden" name="'+j+'" value="'+b.params[j]+'" />'}if(b.createParams){var h=b.createParams();if(h){for(j in h){i+='<input type="hidden" name="'+j+'" value="'+h[j]+'" />'}}}return i})};c.fn.fileupload=function(e){if(e){c.extend(b,e)}return this.each(function(){var f=c(this);if(f.data("ajaxUploader-setup")===true){return}f.change(function(){if(f.val()==""){return b.doCancel.apply(f,[b.params])}d(f);var g=b.onStart.apply(f,[f.val()]);if(g!==false){f.parent("form").submit()}});f.data("ajaxUploader-setup",true)})}})(jQuery);